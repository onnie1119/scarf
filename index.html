<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é€²åº¦è¿½è¹¤</title>
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
body.no-scroll {
  overflow: hidden;
  position: fixed;
  width: 100%;
}
    body.done-page {
      background: #e6e6e6; /* âœ… æ·±ç°å®ŒæˆèƒŒæ™¯ */
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #3a7afe;
      color: #fff;
      padding: 15px 16px;
      font-size: 16px;
    }

    .page-indicator {
      letter-spacing: 1.5px;
	  margin: 0 auto;
    }

    .reset-btn {
     	position: fixed;
		right: 20px;
		background: #3a7afe;
		border: none;
		border-radius: 4px;
		padding: 0;
		font-size: 18px;
		cursor: pointer;
		white-space: nowrap;
		flex-shrink: 0;
    }

    .reset-btn:hover {
      background: #e0eaff;
    }

    .progress-bar {
      height: 6px;
      background: #ffffff80;
      width: 100%;
    }

    .progress-fill {
      height: 100%;
      background: #bcdfff;
      width: 0%;
      transition: width 0.4s ease;
    }

    .container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
		overflow: visible;
z-index: auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* âœ… å›ºå®šæ¯è¡Œ 4 æ ¼ */
      gap: 12px;
      margin-bottom: 30px;
		overflow: visible;
z-index: auto;
    }

    .cell {
    aspect-ratio: 1 / 1;
    background: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(17px, 2.5vw, 18px);
    white-space: nowrap;
    overflow: hidden;
    border-radius: 6px;
    user-select: none;
	padding: 20px;
    height: 65px;
    color: #a6a6a6;
    cursor: pointer;
    transition: background 0.3s 
ease, color 0.3s 
ease;
    position: relative;
    text-align: center;
    }

    .cell.done {
      background: #3a7afe;
      color: #fff;
    }

    .cell.active::after {
      content: "é€²è¡Œä¸­";
    position: absolute;
    bottom: 10px;
    right: 33px;
    font-size: 12px;
    color: #3a7afe;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      position: fixed;
    bottom: 2rem;
    }

    button {
      padding: 8px 20px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    #prevBtn,
    #nextBtn {
      background: #a6a6a6;
      color: #fff;
    }

    #undoBtn {
      background: #e53935;
      color: #fff;
    }

    #saveBtn {
      background: #f5b51d;
      color: #fff;
    }

    #saveBtn.saved {
      background: #4caf50;
    }
	
	#nextBtn {
  transition: background 0.3s ease, color 0.3s ease;position: relative;
}

#nextBtn:disabled {
  background: #f0f0f0;
  color: #b0b0b0;
  cursor: not-allowed;
  opacity: 1;
}

#nextBtn[aria-disabled="true"]::after {
  content: attr(title); /* âœ… é¡¯ç¤ºæç¤ºæ–‡å­— */
  position: absolute;
  top: -28px;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: #fff;
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}
#nextBtn.completed {
  background: #3a7afe;
  color: #fff;
  cursor: default;
  border: none;
}
#prevBtn[disabled] {
  background: #f0f0f0;
  color: #b0b0b0;
  cursor: not-allowed;
  border: 1px solid #ccc;
}
.cell.done {
  background: #3a7afe;
  color: #fff;
  font-size: 12px;
  letter-spacing: 1px;
}
#grid {
  	display: grid;
    grid-template-columns: repeat(3, 1fr);
    max-width: 100%;
    box-sizing: border-box;
    justify-items: center;
}
.cell {
  aspect-ratio: 1 / 1; /* âœ… ä¿æŒæ­£æ–¹å½¢ */
  background: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(16px, 2.5vw, 18px); /* âœ… è‡ªå‹•ç¸®æ”¾ */
  white-space: nowrap; /* âœ… ä¸æ›è¡Œ */
  overflow: hidden;
  border-radius: 6px;
  user-select: none;
}
.cell.done {
  background: #3a7afe;
  color: #fff;
  font-weight: 500;
  letter-spacing: 0.5px;
}
#container {
  max-width: 600px;
  margin: 0 auto;
}
#topBar {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 8px 16px;
  background: #f5f5f5;
}

#guideBtn {
    position: fixed;
	font-size: 18px;
    right: 45px;
	background-color:#3a7afe;
    border: none;
    padding: 0;
    border-radius: 4px;
    cursor: pointer;
}

#guideOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

#guideOverlay.hidden {
  display: none;
}

#guideContainer {
    
    border-radius: 8px;
    position: relative;
    width: 95%;
    height: 80%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

#guideImage {
  max-width: 100%;
  max-height: 100%;
}

.guideNav button {
     background-color: white;
    padding: 6px 0px;
    font-size: 20px;
    cursor: pointer;
}
.guideNew{
	    position: absolute;
    bottom: 10px;
}
#closeGuide {
   position: absolute;
    top: 11px;
    right: 0px;
    background: transparent;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #333;
}
@keyframes pulse {
  0% { box-shadow: 0 0 0px rgba(58, 122, 254, 0.2); }
  50% { box-shadow: 0 0 12px rgba(58, 122, 254, 0.3); }
  100% { box-shadow: 0 0 0px rgba(58, 122, 254, 0.2); }
}
.cell.active {
  animation: pulse 1.5s infinite;
	background: #FFF;
  border: 1px solid #e0eaff;
}

#authScreen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #f9f9f9;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.auth-box {
  
  text-align: center;
}

.auth-box input {
 padding: 14px 20px;
    font-size: 14px;
    margin-bottom: 12px;
    border: 1px solid #e1e1e1;
    border-radius: 50px;
    width: 230px;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.auth-box button {
 padding: 6px 18px;
    background: #3a7afe;
    color: #fff;
    border: none;
    margin-top: 1rem;
    border-radius: 50px;
    cursor: pointer;
}

#toggleAuth {
  font-size: 14px;
  color: #3a7afe;
  cursor: pointer;
  margin-top: 10px;
}

.user-info {
  position: fixed;
    left: 22px;
    font-size: 12px;
    color: #ffffff91;
    cursor: pointer;
	 z-index: 9999; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
}

.user-menu {
 position: absolute;
    top: 24px;
    left: -3px;
    background: #fff;
    color: #333;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 13px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    z-index: 9999;
    min-width: 77px;
}

.user-menu div {
  padding: 8px 12px;
  border-bottom: 1px solid #eee;
}

.user-menu div:last-child {
  border-bottom: none;
}

.user-menu div:hover {
  background: #f0f0f0;
}

.hidden {
  display: none;
}
.auth-buttons {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 12px;
}

.auth-buttons button {
     padding: 5px 16px;
    background: #3a7afe;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}
/* æ·¡å‡ºå‹•ç•« */
.fade-out {
  animation: fadeOut 0.6s forwards;
}

@keyframes fadeOut {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.95); }
}

/* æ·¡å…¥å‹•ç•« */
.fade-in {
  animation: fadeIn 0.6s forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(1.05); }
  to { opacity: 1; transform: scale(1); }
}

/* é é¢æ»‘å‡º */
.page-slide-out-left {
  animation: slideOutLeft 0.6s forwards;
}
.page-slide-out-right {
  animation: slideOutRight 0.6s forwards;
}

@keyframes slideOutLeft {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(-100%); }
}
@keyframes slideOutRight {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(100%); }
}

/* é é¢æ»‘å…¥ */
.page-slide-in-left {
  animation: slideInLeft 0.6s forwards;
}
.page-slide-in-right {
  animation: slideInRight 0.6s forwards;
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-100%); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(100%); }
  to { opacity: 1; transform: translateX(0); }
}

  </style>
</head>
<body class="no-scroll">

<div id="authScreen">
  <div class="auth-box">
    <h2 id="authTitle">ã‚¹ã‚«ãƒ¼ãƒ•ä½œã‚Š</h2>
    <input type="text" id="authUsername" placeholder="ä½¿ç”¨è€…å¸³è™Ÿ" />
    <input type="password" id="authPassword" placeholder="ä½¿ç”¨è€…å¯†ç¢¼" />
    <div class="auth-buttons">
	  <button onclick="submitAuth('login')">ç™»å…¥</button>
	  <button onclick="submitAuth('register')" style="background-color:#b0b0b0;">è¨»å†Š</button>
	</div>

  </div>
</div>

	
  <div class="top-bar">
	  
	<div class="user-info" id="userInfo">
	  <span id="displayName">ä½¿ç”¨è€…</span>
	  <div class="user-menu hidden" id="userMenu">
	    <div onclick="renameDisplayName()">ä¿®æ”¹åç¨±</div>
	    <div onclick="deleteAccount()">è¨»éŠ·å¸³è™Ÿ</div>
		<div onclick="logout()">ç™»å‡ºå¸³è™Ÿ</div>
	  </div>
	</div>

  	<button id="guideBtn">ğŸŸ¡</button>
    <div class="page-indicator" id="pageLabel">1-30</div>
    <button class="reset-btn" onclick="resetAll()">ğŸ”´</button>
  </div>
  
  <div id="guideOverlay" class="hidden">
  <div id="guideContainer">
    <button id="closeGuide">X</button>
    <img id="guideImage" src="guide1.png" alt="èªªæ˜åœ–ç¤º">
    
  </div>
</div>

  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="container">
    <div class="grid" id="grid"></div>

    <div class="controls">
      <button id="prevBtn" onclick="prevPage()">ä¸Šä¸€é </button>
      <button id="nextBtn" onclick="nextPage()">ä¸‹ä¸€é </button>
      <button id="undoBtn" onclick="undoLastStep()">å¾©åŸ</button>
      <button id="saveBtn" onclick="saveProgress()">å„²å­˜</button>
    </div>
  </div>

<script>
const totalPages = 30;
const cellsPerPage = 10;
let currentUser = localStorage.getItem("currentUser");
let currentPage = 1;
let progress = {};
let historyStack = [];

let authMode = "login"; // "login" æˆ– "register"

// åˆ‡æ›ç™»å…¥/è¨»å†Šæ¨¡å¼ï¼ˆå¦‚æœä½ è¦ä¿ç•™æŒ‰éˆ•åˆ‡æ›ï¼‰
function toggleAuthMode() {
  authMode = authMode === "login" ? "register" : "login";
  document.getElementById("authTitle").textContent =
    authMode === "login" ? "ç™»å…¥é€²åº¦è¿½è¹¤" : "è¨»å†Šæ–°å¸³è™Ÿ";
  document.querySelector(".auth-box button").textContent =
    authMode === "login" ? "ç™»å…¥" : "è¨»å†Š";
  document.getElementById("toggleAuthBtn").textContent =
    authMode === "login" ? "è¨»å†Š" : "è¿”å›ç™»å…¥";
}

// ç™»å…¥/è¨»å†Šæµç¨‹

function submitAuth(mode) {
  const username = document.getElementById("authUsername").value.trim().toLowerCase();
  const password = document.getElementById("authPassword").value;
  const authScreen = document.getElementById("authScreen");
  const container = document.querySelector(".container");

  authScreen.classList.add("page-slide-out-left");
  setTimeout(() => {
    authScreen.style.display = "none";
    container.classList.add("page-slide-in-right");
    setTimeout(() => container.classList.remove("page-slide-in-right"), 600);
    renderPage();
  }, 600);

	
  if (!username || !password) {
    alert("è«‹è¼¸å…¥å¸³è™Ÿèˆ‡å¯†ç¢¼ï¼");
    return;
  }

  const storedPassword = localStorage.getItem(`password_${username}`);

  if (mode === "login") {
    if (!storedPassword) {
      alert("ç„¡æ­¤å¸³è™Ÿç´€éŒ„");
      return;
    }
    if (storedPassword !== password) {
      alert("æ‚¨è¼¸å…¥çš„å¯†ç¢¼éŒ¯èª¤");
      return;
    }
  } else if (mode === "register") {
    if (storedPassword) {
      alert("æ­¤å¸³è™Ÿå·²å­˜åœ¨ï¼");
      return;
    }
    localStorage.setItem(`password_${username}`, password);

   // æª¢æŸ¥ä½¿ç”¨è€…åç¨±å”¯ä¸€æ€§
  let displayName;
  let nameExists = true;

  while (nameExists) {
    displayName = prompt("è¨»å†ŠæˆåŠŸï¼è«‹è¼¸å…¥æ‚¨çš„ä½¿ç”¨è€…åç¨±ï¼š");
    if (!displayName) {
      alert("å¿…é ˆè¼¸å…¥ä½¿ç”¨è€…åç¨±ï¼è¨»å†Šæµç¨‹ä¸­æ­¢ã€‚");
      return; // âŒ æ²’è¼¸å…¥åç¨±å°±ç›´æ¥çµæŸï¼Œä¸é€²å…¥é¦–é 
    }

    nameExists = false;
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (key.startsWith("displayName_")) {
        if (localStorage.getItem(key) === displayName) {
          nameExists = true;
          alert("æ­¤ä½¿ç”¨è€…åç¨±å·²è¢«ä½¿ç”¨ï¼Œè«‹æ›ä¸€å€‹ï¼");
          break;
        }
      }
    }
  }
    localStorage.setItem(`displayName_${username}`, displayName);
    alert("è¨»å†Šå®Œæˆï¼Œå·²è‡ªå‹•ç™»å…¥ï¼");
  }

  // å…±ç”¨ç™»å…¥æµç¨‹
  currentUser = username;
  localStorage.setItem("currentUser", currentUser);
  const savedProgress = localStorage.getItem(`progress_${currentUser}`);
  const savedPage = localStorage.getItem(`page_${currentUser}`);
  progress = savedProgress ? JSON.parse(savedProgress) : {};
  currentPage = savedPage ? parseInt(savedPage) : 1;
  document.getElementById("authScreen").style.display = "none";
  renderPage();
}


function renderPage() {
 const displayName = localStorage.getItem(`displayName_${currentUser}`) || currentUser;
document.getElementById("displayName").textContent = displayName;
document.getElementById("pageLabel").textContent = `${currentPage}-${totalPages}`;


  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  document.body.classList.remove("done-page");

  let allDone = true;
  let firstIncompleteFound = false;

  for (let i = 0; i < cellsPerPage; i++) {
    const num = 5 + i;
    const key = `p${currentPage}-${num}`;
    const cell = document.createElement("div");
    cell.className = "cell";

    if (progress[key] === "done") {
      cell.classList.add("done");
      cell.textContent = "å·²å®Œæˆ";
    } else {
      cell.textContent = num;

      if (!firstIncompleteFound) {
        progress[key] = "active";
        cell.classList.add("active");
        firstIncompleteFound = true;
      }

      allDone = false;
    }

    cell.onclick = () => {
      if (progress[key] === "done") return;
      if (progress[key] !== "active") {
        alert("è«‹ä¾åºå®Œæˆæ­¥é©Ÿï¼Œä¸èƒ½è·³éä¸­é–“çš„æ ¼å­ï¼");
        return;
      }

      progress[key] = "done";
      historyStack.push(key);

      const nextKey = `p${currentPage}-${num + 1}`;
      if (!progress[nextKey]) {
        progress[nextKey] = "active";
      }

      localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
      localStorage.setItem(`page_${currentUser}`, currentPage);
      localStorage.setItem("progressSaved", "false");

      renderPage();
    };

    grid.appendChild(cell);
  }

  const prevBtn = document.getElementById("prevBtn");
  prevBtn.disabled = currentPage === 1;

  updateProgressBar();

  const saveBtn = document.getElementById("saveBtn");
  const saved = localStorage.getItem("progressSaved") === "true";
  if (saved) {
    saveBtn.classList.add("saved");
  } else {
    saveBtn.classList.remove("saved");
  }

  const nextBtn = document.getElementById("nextBtn");
  nextBtn.textContent = "ä¸‹ä¸€é ";
  nextBtn.classList.remove("completed");
  nextBtn.onclick = nextPage;

  if (allDone && currentPage === totalPages) {
    nextBtn.textContent = "å·²å®Œæˆ";
    nextBtn.classList.add("completed");
    nextBtn.onclick = () => {
      alert("ğŸ‰ æ­å–œæ‚¨å®Œæˆè‰±é›£çš„ä»»å‹™ï¼è¾›è‹¦äº†ï¼");
    };
  }

  if (allDone) {
    nextBtn.setAttribute("aria-disabled", "false");
    nextBtn.style.background = currentPage === totalPages ? "#3a7afe" : "#a6a6a6";
    nextBtn.style.color = "#fff";
    nextBtn.style.cursor = "pointer";
    nextBtn.style.border = "none";
    nextBtn.title = "";
    document.body.classList.add("done-page");
  } else {
    nextBtn.setAttribute("aria-disabled", "true");
    nextBtn.style.background = "#f0f0f0";
    nextBtn.style.color = "#b0b0b0";
    nextBtn.style.cursor = "not-allowed";
    nextBtn.style.border = "1px solid #ccc";
    nextBtn.title = "è«‹å…ˆå®Œæˆæœ¬é æ‰èƒ½å‰å¾€ä¸‹ä¸€é ";
    document.body.classList.remove("done-page");
  }
}

function prevPage() {
  if (currentPage > 1) {
    const container = document.querySelector(".container");
    container.classList.add("page-slide-out-right");
    setTimeout(() => {
      currentPage--;
      renderPage();
      container.classList.remove("page-slide-out-right");
      container.classList.add("page-slide-in-left");
      setTimeout(() => container.classList.remove("page-slide-in-left"), 600);
    }, 600);
  }
}

function nextPage() {
  let allDone = true;
  for (let i = 0; i < cellsPerPage; i++) {
    const num = 5 + i;
    const key = `p${currentPage}-${num}`;
    if (progress[key] !== "done") {
      allDone = false;
      break;
    }
  }

  if (!allDone) {
    alert("è«‹å…ˆå®Œæˆæœ¬é æ‰€æœ‰æ­¥é©Ÿæ‰èƒ½å‰å¾€ä¸‹ä¸€é ï¼");
    return;
  }

  if (currentPage < totalPages) {
    const container = document.querySelector(".container");
    container.classList.add("page-slide-out-left");
    setTimeout(() => {
      currentPage++;
      renderPage();
      container.classList.remove("page-slide-out-left");
      container.classList.add("page-slide-in-right");
      setTimeout(() => container.classList.remove("page-slide-in-right"), 600);
    }, 600);
  }
}


function saveProgress() {
  localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
  localStorage.setItem(`page_${currentUser}`, currentPage);
  localStorage.setItem("progressSaved", "true");

  const saveBtn = document.getElementById("saveBtn");
  saveBtn.classList.add("saved");

  setTimeout(() => {
    saveBtn.classList.remove("saved");
    localStorage.setItem("progressSaved", "false");
  }, 10000);

  alert("é€²åº¦å·²å„²å­˜ï¼");
}

function undoLastStep() {
  if (historyStack.length === 0) return;

  const lastKey = historyStack.pop();
  delete progress[lastKey];

  const match = lastKey.match(/p(\d+)-(\d+)/);
  if (match) {
    const page = parseInt(match[1]);
    const num = parseInt(match[2]);
    const nextKey = `p${page}-${num + 1}`;
    if (progress[nextKey] === "active") {
      delete progress[nextKey];
    }
  }

  localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
  localStorage.setItem(`page_${currentUser}`, currentPage);
  localStorage.setItem("progressSaved", "false");

  renderPage();
}

function resetAll() {
  if (confirm("ç¢ºå®šè¦æ¢å¾©é è¨­ï¼Ÿé€™æœƒæ¸…é™¤æ‰€æœ‰é€²åº¦ï¼")) {
    localStorage.removeItem(`progress_${currentUser}`);
    localStorage.removeItem(`page_${currentUser}`);
    localStorage.removeItem("progressSaved");
    progress = {};
    historyStack = [];
    currentPage = 1;
    renderPage();
  }
}

function updateProgressBar() {
  const totalCells = totalPages * cellsPerPage;
  const doneCount = Object.values(progress).filter(v => v === "done").length;
  const percent = Math.round((doneCount / totalCells) * 100);
  document.getElementById("progressFill").style.width = `${percent}%`;
}


	// é»æ“Šä½¿ç”¨è€…åç¨± â†’ é¡¯ç¤ºé¸å–®
document.getElementById("userInfo").onclick = () => {
  const menu = document.getElementById("userMenu");
  menu.classList.toggle("hidden");
};

document.addEventListener("click", (e) => {
  const menu = document.getElementById("userMenu");
  if (!document.getElementById("userInfo").contains(e.target)) {
    menu.classList.add("hidden");
  }
});

// ä¿®æ”¹ä½¿ç”¨è€…åç¨±
function renameDisplayName() {
  let newName;
  let nameExists = true;

  while (nameExists) {
    newName = prompt("è«‹è¼¸å…¥æ–°çš„ä½¿ç”¨è€…åç¨±ï¼š");
    if (!newName) {
      alert("å¿…é ˆè¼¸å…¥ä½¿ç”¨è€…åç¨±ï¼");
      return;
    }

    nameExists = false;
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (key.startsWith("displayName_")) {
        const existingName = localStorage.getItem(key);
        if (existingName === newName) {
          nameExists = true;
          alert("æ­¤ä½¿ç”¨è€…åç¨±å·²è¢«ä½¿ç”¨ï¼Œè«‹æ›ä¸€å€‹ï¼");
          break;
        }
      }
    }
  }

  // âœ… å”¯ä¸€åç¨±æ‰æ›´æ–°
  localStorage.setItem(`displayName_${currentUser}`, newName);
  document.getElementById("displayName").textContent = newName;
  alert("åç¨±å·²æ›´æ–°ï¼");
}


// ç™»å‡ºåŠŸèƒ½
function logout() {
  const container = document.querySelector(".container");
  const authScreen = document.getElementById("authScreen");

  container.classList.add("page-slide-out-right");
  setTimeout(() => {
    localStorage.removeItem("currentUser");
    authScreen.style.display = "flex";
    authScreen.classList.add("page-slide-in-left");
    setTimeout(() => authScreen.classList.remove("page-slide-in-left"), 600);
  }, 600);
}


// è¨»éŠ·å¸³è™ŸåŠŸèƒ½
function deleteAccount() {
  if (confirm("ç¢ºå®šè¦è¨»éŠ·å¸³è™Ÿï¼Ÿé€™å°‡åˆªé™¤æ‰€æœ‰è³‡æ–™ï¼")) {
    localStorage.removeItem(`password_${currentUser}`);
    localStorage.removeItem(`progress_${currentUser}`);
    localStorage.removeItem(`page_${currentUser}`);
    localStorage.removeItem(`displayName_${currentUser}`);
    localStorage.removeItem("currentUser");
    alert("å¸³è™Ÿå·²è¨»éŠ·ï¼");
    location.reload();
  }
}
if (!currentUser) {
  document.getElementById("authScreen").style.display = "flex";
} else {
  // å·²ç™»å…¥ â†’ ç›´æ¥è¼‰å…¥é€²åº¦
  const savedProgress = localStorage.getItem(`progress_${currentUser}`);
  const savedPage = localStorage.getItem(`page_${currentUser}`);
  progress = savedProgress ? JSON.parse(savedProgress) : {};
  currentPage = savedPage ? parseInt(savedPage) : 1;
  document.getElementById("authScreen").style.display = "none";
  renderPage();
}
function changeGuideImage(newSrc, direction = "left") {
  const img = document.getElementById("guideImage");
  const outClass = direction === "left" ? "page-slide-out-left" : "page-slide-out-right";
  const inClass = direction === "left" ? "page-slide-in-right" : "page-slide-in-left";

  img.classList.add(outClass);
  setTimeout(() => {
    img.src = newSrc;
    img.classList.remove(outClass);
    img.classList.add(inClass);
    setTimeout(() => img.classList.remove(inClass), 600);
  }, 600);
}

</script>



</body>
</html>






























































