<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÈÄ≤Â∫¶ËøΩËπ§</title>
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
body.no-scroll {
  overflow: hidden;
  position: fixed;
  width: 100%;
}
    body.done-page {
      background: #e6e6e6; /* ‚úÖ Ê∑±ÁÅ∞ÂÆåÊàêËÉåÊôØ */
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #3a7afe;
      color: #fff;
      padding: 15px 16px;
      font-size: 16px;
    }

    .page-indicator {
      letter-spacing: 1.5px;
	  margin: 0 auto;
    }

    .reset-btn {
     	position: fixed;
		right: 20px;
		background: #3a7afe;
		border: none;
		border-radius: 4px;
		padding: 0;
		font-size: 18px;
		cursor: pointer;
		white-space: nowrap;
		flex-shrink: 0;
    }

    .reset-btn:hover {
      background: #e0eaff;
    }

    .progress-bar {
      height: 6px;
      background: #ffffff80;
      width: 100%;
    }

    .progress-fill {
      height: 100%;
      background: #bcdfff;
      width: 0%;
      transition: width 0.4s ease;
    }

    .container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* ‚úÖ Âõ∫ÂÆöÊØèË°å 4 Ê†º */
      gap: 12px;
      margin-bottom: 30px;
    }

    .cell {
    aspect-ratio: 1 / 1;
    background: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(17px, 2.5vw, 18px);
    white-space: nowrap;
    overflow: hidden;
    border-radius: 6px;
    user-select: none;
	padding: 20px;
    height: 65px;
    color: #a6a6a6;
    cursor: pointer;
    transition: background 0.3s 
ease, color 0.3s 
ease;
    position: relative;
    text-align: center;
    }

    .cell.done {
      background: #3a7afe;
      color: #fff;
    }

    .cell.active::after {
      content: "ÈÄ≤Ë°å‰∏≠";
    position: absolute;
    bottom: 10px;
    right: 33px;
    font-size: 12px;
    color: #3a7afe;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      position: fixed;
    bottom: 2rem;
    }

    button {
      padding: 10px 20px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    #prevBtn,
    #nextBtn {
      background: #a6a6a6;
      color: #fff;
    }

    #undoBtn {
      background: #e53935;
      color: #fff;
    }

    #saveBtn {
      background: #f5b51d;
      color: #fff;
    }

    #saveBtn.saved {
      background: #4caf50;
    }
	
	#nextBtn {
  transition: background 0.3s ease, color 0.3s ease;position: relative;
}

#nextBtn:disabled {
  background: #f0f0f0;
  color: #b0b0b0;
  cursor: not-allowed;
  opacity: 1;
}

#nextBtn[aria-disabled="true"]::after {
  content: attr(title); /* ‚úÖ È°ØÁ§∫ÊèêÁ§∫ÊñáÂ≠ó */
  position: absolute;
  top: -28px;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: #fff;
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}
#nextBtn.completed {
  background: #3a7afe;
  color: #fff;
  cursor: default;
  border: none;
}
#prevBtn[disabled] {
  background: #f0f0f0;
  color: #b0b0b0;
  cursor: not-allowed;
  border: 1px solid #ccc;
}
.cell.done {
  background: #3a7afe;
  color: #fff;
  font-size: 12px;
  letter-spacing: 1px;
}
#grid {
  	display: grid;
    grid-template-columns: repeat(3, 1fr);
    max-width: 100%;
    box-sizing: border-box;
    justify-items: center;
}
.cell {
  aspect-ratio: 1 / 1; /* ‚úÖ ‰øùÊåÅÊ≠£ÊñπÂΩ¢ */
  background: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(16px, 2.5vw, 18px); /* ‚úÖ Ëá™ÂãïÁ∏ÆÊîæ */
  white-space: nowrap; /* ‚úÖ ‰∏çÊèõË°å */
  overflow: hidden;
  border-radius: 6px;
  user-select: none;
}
.cell.done {
  background: #3a7afe;
  color: #fff;
  font-weight: 500;
  letter-spacing: 0.5px;
}
#container {
  max-width: 600px;
  margin: 0 auto;
}
#topBar {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: 8px 16px;
  background: #f5f5f5;
}

#guideBtn {
    position: fixed;
	font-size: 18px;
    right: 45px;
	background-color:#3a7afe;
    border: none;
    padding: 0;
    border-radius: 4px;
    cursor: pointer;
}

#guideOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

#guideOverlay.hidden {
  display: none;
}

#guideContainer {
    
    border-radius: 8px;
    position: relative;
    width: 95%;
    height: 80%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

#guideImage {
  max-width: 100%;
  max-height: 100%;
}

.guideNav button {
     background-color: white;
    padding: 6px 0px;
    font-size: 20px;
    cursor: pointer;
}
.guideNew{
	    position: absolute;
    bottom: 10px;
}
#closeGuide {
   position: absolute;
    top: 11px;
    right: 0px;
    background: transparent;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #333;
}
@keyframes pulse {
  0% { box-shadow: 0 0 0px rgba(58, 122, 254, 0.2); }
  50% { box-shadow: 0 0 12px rgba(58, 122, 254, 0.3); }
  100% { box-shadow: 0 0 0px rgba(58, 122, 254, 0.2); }
}
.cell.active {
  animation: pulse 1.5s infinite;
	background: #FFF;
  border: 1px solid #e0eaff;
}

#loginScreen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #f9f9f9;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.login-box {
  background: #fff;
  padding: 30px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  text-align: center;
}

.login-box input {
  padding: 8px 12px;
  font-size: 16px;
  margin-bottom: 12px;
  width: 200px;
}

.login-box button {
  padding: 8px 16px;
  background: #3a7afe;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}


  </style>
</head>
<body class="no-scroll">

<div id="loginScreen">
  <div class="login-box">
    <h2>Ë´ãËº∏ÂÖ•‰ΩøÁî®ËÄÖÂêçÁ®±</h2>
    <input type="text" id="usernameInput" placeholder="‰æãÂ¶ÇÔºöichen" />
    <button onclick="login()">ÁôªÂÖ•</button>
  </div>
</div>
	
  <div class="top-bar">
  	<button id="guideBtn">üü°</button>
    <div class="page-indicator" id="pageLabel">1-30</div>
    <button class="reset-btn" onclick="resetAll()">üî¥</button>
  </div>
  
  <div id="guideOverlay" class="hidden">
  <div id="guideContainer">
    <button id="closeGuide">X</button>
    <img id="guideImage" src="guide1.png" alt="Ë™™ÊòéÂúñÁ§∫">
    
  </div>
</div>

  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="container">
    <div class="grid" id="grid"></div>

    <div class="controls">
      <button id="prevBtn" onclick="prevPage()">‰∏ä‰∏ÄÈ†Å</button>
      <button id="nextBtn" onclick="nextPage()">‰∏ã‰∏ÄÈ†Å</button>
      <button id="undoBtn" onclick="undoLastStep()">Âæ©Âéü</button>
      <button id="saveBtn" onclick="saveProgress()">ÂÑ≤Â≠ò</button>
    </div>
  </div>

  <script>
const totalPages = 30;
const cellsPerPage = 10;
let currentUser = localStorage.getItem("currentUser");
let currentPage = 1;
let progress = {};
let historyStack = [];

function login() {
  const input = document.getElementById("usernameInput");
  const name = input.value.trim();
  if (!name) {
    alert("Ë´ãËº∏ÂÖ•‰ΩøÁî®ËÄÖÂêçÁ®±ÔºÅ");
    return;
  }

  currentUser = name;
  localStorage.setItem("currentUser", currentUser);

  const savedProgress = localStorage.getItem(`progress_${currentUser}`);
  const savedPage = localStorage.getItem(`page_${currentUser}`);
  progress = savedProgress ? JSON.parse(savedProgress) : {};
  currentPage = savedPage ? parseInt(savedPage) : 1;

  document.getElementById("loginScreen").style.display = "none";
  renderPage();
}

function renderPage() {
  document.getElementById("pageLabel").textContent = `${currentPage}-${totalPages}`;
  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  document.body.classList.remove("done-page");

  let allDone = true;
  let firstIncompleteFound = false;

  for (let i = 0; i < cellsPerPage; i++) {
    const num = 5 + i;
    const key = `p${currentPage}-${num}`;
    const cell = document.createElement("div");
    cell.className = "cell";

    if (progress[key] === "done") {
      cell.classList.add("done");
      cell.textContent = "Â∑≤ÂÆåÊàê";
    } else {
      cell.textContent = num;

      if (!firstIncompleteFound) {
        progress[key] = "active";
        cell.classList.add("active");
        firstIncompleteFound = true;
      }

      allDone = false;
    }

    cell.onclick = () => {
      if (progress[key] === "done") return;
      if (progress[key] !== "active") {
        alert("Ë´ã‰æùÂ∫èÂÆåÊàêÊ≠•È©üÔºå‰∏çËÉΩË∑≥ÈÅé‰∏≠ÈñìÁöÑÊ†ºÂ≠êÔºÅ");
        return;
      }

      progress[key] = "done";
      historyStack.push(key);

      const nextKey = `p${currentPage}-${num + 1}`;
      if (!progress[nextKey]) {
        progress[nextKey] = "active";
      }

      localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
      localStorage.setItem(`page_${currentUser}`, currentPage);
      localStorage.setItem("progressSaved", "false");

      renderPage();
    };

    grid.appendChild(cell);
  }

  const prevBtn = document.getElementById("prevBtn");
  prevBtn.disabled = currentPage === 1;

  updateProgressBar();

  const saveBtn = document.getElementById("saveBtn");
  const saved = localStorage.getItem("progressSaved") === "true";
  if (saved) {
    saveBtn.classList.add("saved");
  } else {
    saveBtn.classList.remove("saved");
  }

  const nextBtn = document.getElementById("nextBtn");
  nextBtn.textContent = "‰∏ã‰∏ÄÈ†Å";
  nextBtn.classList.remove("completed");
  nextBtn.onclick = nextPage;

  if (allDone && currentPage === totalPages) {
    nextBtn.textContent = "Â∑≤ÂÆåÊàê";
    nextBtn.classList.add("completed");
    nextBtn.onclick = () => {
      alert("üéâ ÊÅ≠ÂñúÊÇ®ÂÆåÊàêËâ±Èõ£ÁöÑ‰ªªÂãôÔºÅËæõËã¶‰∫ÜÔºÅ");
    };
  }

  if (allDone) {
    nextBtn.setAttribute("aria-disabled", "false");
    nextBtn.style.background = currentPage === totalPages ? "#3a7afe" : "#a6a6a6";
    nextBtn.style.color = "#fff";
    nextBtn.style.cursor = "pointer";
    nextBtn.style.border = "none";
    nextBtn.title = "";
    document.body.classList.add("done-page");
  } else {
    nextBtn.setAttribute("aria-disabled", "true");
    nextBtn.style.background = "#f0f0f0";
    nextBtn.style.color = "#b0b0b0";
    nextBtn.style.cursor = "not-allowed";
    nextBtn.style.border = "1px solid #ccc";
    nextBtn.title = "Ë´ãÂÖàÂÆåÊàêÊú¨È†ÅÊâçËÉΩÂâçÂæÄ‰∏ã‰∏ÄÈ†Å";
    document.body.classList.remove("done-page");
  }
}

function prevPage() {
  if (currentPage > 1) {
    currentPage--;
    renderPage();
  }
}

function nextPage() {
  let allDone = true;
  for (let i = 0; i < cellsPerPage; i++) {
    const num = 5 + i;
    const key = `p${currentPage}-${num}`;
    if (progress[key] !== "done") {
      allDone = false;
      break;
    }
  }

  if (!allDone) {
    alert("Ë´ãÂÖàÂÆåÊàêÊú¨È†ÅÊâÄÊúâÊ≠•È©üÊâçËÉΩÂâçÂæÄ‰∏ã‰∏ÄÈ†ÅÔºÅ");
    return;
  }

  if (currentPage < totalPages) {
    currentPage++;
    renderPage();
  }
}

function saveProgress() {
  localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
  localStorage.setItem(`page_${currentUser}`, currentPage);
  localStorage.setItem("progressSaved", "true");

  const saveBtn = document.getElementById("saveBtn");
  saveBtn.classList.add("saved");

  setTimeout(() => {
    saveBtn.classList.remove("saved");
    localStorage.setItem("progressSaved", "false");
  }, 10000);

  alert("ÈÄ≤Â∫¶Â∑≤ÂÑ≤Â≠òÔºÅ");
}

function undoLastStep() {
  if (historyStack.length === 0) return;

  const lastKey = historyStack.pop();
  delete progress[lastKey];

  const match = lastKey.match(/p(\d+)-(\d+)/);
  if (match) {
    const page = parseInt(match[1]);
    const num = parseInt(match[2]);
    const nextKey = `p${page}-${num + 1}`;
    if (progress[nextKey] === "active") {
      delete progress[nextKey];
    }
  }

  localStorage.setItem(`progress_${currentUser}`, JSON.stringify(progress));
  localStorage.setItem(`page_${currentUser}`, currentPage);
  localStorage.setItem("progressSaved", "false");

  renderPage();
}

function resetAll() {
  if (confirm("Á¢∫ÂÆöË¶ÅÊÅ¢Âæ©È†êË®≠ÔºüÈÄôÊúÉÊ∏ÖÈô§ÊâÄÊúâÈÄ≤Â∫¶ÔºÅ")) {
    localStorage.removeItem(`progress_${currentUser}`);
    localStorage.removeItem(`page_${currentUser}`);
    localStorage.removeItem("progressSaved");
    progress = {};
    historyStack = [];
    currentPage = 1;
    renderPage();
  }
}

function updateProgressBar() {
  const totalCells = totalPages * cellsPerPage;
  const doneCount = Object.values(progress).filter(v => v === "done").length;
  const percent = Math.round((doneCount / totalCells) * 100);
  document.getElementById("progressFill").style.width = `${percent}%`;
}

// ‚úÖ ÂàùÂßãÂåñÔºöÊ™¢Êü•ÊòØÂê¶Â∑≤ÁôªÂÖ•
if (!currentUser) {
  document.getElementById("loginScreen").style.display = "flex";
} else {
  const savedProgress = localStorage.getItem(`progress_${currentUser}`);
  const savedPage = localStorage.getItem(`page_${currentUser}`);
  progress = savedProgress ? JSON.parse(savedProgress) : {};
  currentPage = savedPage ? parseInt(savedPage) : 1;
  renderPage();
}
</script>

</body>
</html>




























